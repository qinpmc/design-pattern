<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    var getGuangdongCity = function(){
        var guangdongCity = [
            {
                name:"shenzhen",
                id:11
            },
            {
                name:"广州",
                id:12
            },
        ];
        return guangdongCity;
    }

    var render = function(fn){
        console.log("开始渲染地图");
        document.write(JSON.stringify(fn()));
    }
    //render(getGuangdongCity);

    //新的数据结构
    var newGuangdongCity = {
        shenzhen:11,
        guangzhou:12
    }

    var addressAdapter = function(oldAddressfn){
        var address = {},
                oldAddress = oldAddressfn();
        for(var i= 0,c;c=oldAddress[i++];){
            address[c.name]  = c.id;   //旧的数据结构转换成新的数据结构
        }
        return function (){
            return address;
        }
    }

    render(addressAdapter(getGuangdongCity));
</script>
</body>
</html>